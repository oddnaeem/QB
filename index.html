<!DOCTYPE html><html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>উন্মুক্ত প্রশ্নব্যাংক</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: "Noto Sans Bengali", sans-serif;
      background: #e6ecf0;
      margin: 0;
      padding: 0;
    }
    header {
      background: #2c3e50;
      padding: 20px;
      color: white;
      text-align: center;
      font-size: 1.8em;
    }
    .container {
      max-width: 900px;
      margin: 30px auto;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      padding: 20px 30px;
    }
    .start-section, .quiz-section {
      display: none;
    }
    .start-section.active, .quiz-section.active {
      display: block;
    }
    .form-group {
      margin-bottom: 20px;
      text-align: center;
    }
    label, input[type=number] {
      font-size: 1.1em;
    }
    input[type=number] {
      padding: 10px;
      width: 80px;
      border-radius: 8px;
      border: 1px solid #ccc;
      text-align: center;
    }
    button {
      background-color: #3498db;
      color: white;
      padding: 12px 24px;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 20px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    button:disabled {
      background-color: #95a5a6;
      cursor: not-allowed;
    }
    .question {
      margin-bottom: 20px;
    }
    .question-title {
      font-weight: bold;
      margin-bottom: 10px;
    }
    .options label {
      display: block;
      background: #f2f2f2;
      padding: 10px;
      margin-bottom: 8px;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s ease;
      border: 1px solid #ccc;
    }
    .options label:hover {
      background: #e0e0e0;
    }
    .explanation {
      margin-top: 10px;
      padding: 10px;
      background: #f9f9f9;
      border-left: 4px solid #2ecc71;
      font-style: italic;
      border-radius: 6px;
    }
    #timer {
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      color: #e67e22;
      margin-bottom: 20px;
    }
    #result {
      text-align: center;
      font-size: 1.3em;
      margin-top: 30px;
      background: #ecf9ec;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #2ecc71;
    }
  </style>
</head>
<body>
  <header>বিশ্ববিদ্যালয় ভর্তি প্রস্তুতি ২০২৫-২৬</header>
  <div class="container">
    <section id="startSection" class="start-section active">
      <div class="form-group">
        <label>⏱️ সময় (ঘণ্টা - মিনিট - সেকেন্ড):</label><br>
        <input type="number" id="h" value="0" min="0"> :
        <input type="number" id="m" value="3" min="0" max="59"> :
        <input type="number" id="s" value="0" min="0" max="59">
      </div>
      <div class="form-group">
        <label>প্রশ্ন সংখ্যা:</label><br>
        <input type="number" id="qCount" value="30" min="1" max="25">
      </div>
      <div class="form-group">
        <button onclick="startExam()">প্র‍্যাকটিজ শুরু কর</button>
      </div>
    </section><section id="quizSection" class="quiz-section">
  <div id="timer"></div>
  <form id="quizForm"></form>
  <button id="submitBtn" disabled onclick="submitExam()" type="button">উত্তর জমা দাও</button>
  <div id="result"></div>
</section>

  </div>  <script>
    let allQuestions = [];
    let selectedQuestions = [];
    let timeLeft = 60;
    let timerInterval;
    let score = 0;
    let attempted = 0;
    const NEGATIVE_MARK = 0.25;

    async function loadQuestions() {
      try {
        const response = await fetch('Data.json');
        if (!response.ok) throw new Error('JSON লোড করতে সমস্যা হয়েছে');
        allQuestions = await response.json();
      } catch (err) {
        alert('প্রশ্ন লোড করতে সমস্যা: ' + err.message);
        allQuestions = [];
      }
    }

    function shuffleArray(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function saveProgress() {
      localStorage.setItem('mcq_exam_data', JSON.stringify({ score, attempted }));
    }

    function startExam() {
      const h = parseInt(document.getElementById("h").value) || 0;
      const m = parseInt(document.getElementById("m").value) || 0;
      const s = parseInt(document.getElementById("s").value) || 0;
      const qCount = parseInt(document.getElementById("qCount").value) || 10;
      timeLeft = h * 3600 + m * 60 + s;

      loadQuestions().then(() => {
        if (allQuestions.length === 0) {
          alert('প্রশ্ন পাওয়া যায়নি।');
          return;
        }

        selectedQuestions = shuffleArray([...allQuestions]).slice(0, qCount);
        score = 0;
        attempted = 0;
        document.getElementById("startSection").classList.remove("active");
        document.getElementById("quizSection").classList.add("active");
        renderQuestions();
        startTimer();
      });
    }

    function renderQuestions() {
      const form = document.getElementById("quizForm");
      form.innerHTML = "";

      selectedQuestions.forEach((q, i) => {
        const div = document.createElement("div");
        div.className = "question";
        div.innerHTML = `<div class='question-title'>${i + 1}. ${q.question}</div>`;

        const optionsDiv = document.createElement("div");
        optionsDiv.className = "options";
        shuffleArray(q.options).forEach(opt => {
          const label = document.createElement("label");
          label.innerHTML = `<input type="radio" name="q${i}" value="${opt}"> ${opt}`;
          const input = label.querySelector("input");

          input.addEventListener("change", () => {
            attempted++;
            saveProgress();
            if (document.querySelectorAll('input[type="radio"]:checked').length === selectedQuestions.length) {
              document.getElementById("submitBtn").disabled = false;
            }
          });
          optionsDiv.appendChild(label);
        });
        div.appendChild(optionsDiv);
        form.appendChild(div);
      });
    }

    function formatTime(s) {
      const h = Math.floor(s / 3600);
      const m = Math.floor((s % 3600) / 60);
      const sec = s % 60;
      return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
    }

    function startTimer() {
      const t = document.getElementById("timer");
      t.textContent = `⏳ টাইমার: ${formatTime(timeLeft)}`;
      timerInterval = setInterval(() => {
        timeLeft--;
        t.textContent = `⏳ টাইমার: ${formatTime(timeLeft)}`;
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          submitExam();
        }
      }, 1000);
    }

    function submitExam() {
      clearInterval(timerInterval);
      const form = document.getElementById("quizForm");
      const questions = form.querySelectorAll(".question");

      selectedQuestions.forEach((q, i) => {
        const inputs = document.querySelectorAll(`input[name='q${i}']`);
        let selected = null;
        inputs.forEach(input => {
          input.disabled = true;
          if (input.checked) selected = input.value;
          input.parentElement.style.backgroundColor = '';
          input.parentElement.style.color = '';
          input.parentElement.style.fontWeight = 'normal';
        });

        inputs.forEach(input => {
          if (input.value === q.answer) {
            input.parentElement.style.backgroundColor = '#d4edda';
            input.parentElement.style.color = '#155724';
            input.parentElement.style.fontWeight = 'bold';
          }
        });

        if (selected && selected !== q.answer) {
          score -= NEGATIVE_MARK;
          inputs.forEach(input => {
            if (input.checked) {
              input.parentElement.style.backgroundColor = '#f8d7da';
              input.parentElement.style.color = '#721c24';
              input.parentElement.style.fontWeight = 'bold';
            }
          });
        } else if (selected === q.answer) {
          score++;
        }

        if (q.explain) {
          const explanation = document.createElement("div");
          explanation.className = "explanation";
          explanation.textContent = `ব্যাখ্যা: ${q.explain}`;
          questions[i].appendChild(explanation);
        }
      });

      localStorage.removeItem('mcq_exam_data');
      document.getElementById("result").textContent = `Score: ${score.toFixed(2)} / ${selectedQuestions.length}`;
      document.getElementById("submitBtn").disabled = true;
    }
  </script></body>
</html>
