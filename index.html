<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>প্রশ্নব্যাংক</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }

    button {
      padding: 10px;
      width: 100%;
      margin-top: 10px;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
      z-index: 10;
    }

    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 400px;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
    }

    .question {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>

  <h2>প্রশ্নব্যাংক</h2>

  <button onclick="openModal()">➕ প্রশ্ন তৈরি করুন</button>
  <button onclick="downloadJSON()">⬇️ JSON ফাইল ডাউনলোড</button>

  <div id="questionList"></div>

  <!-- ✅ প্রশ্ন তৈরির জন্য পপআপ ফর্ম -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <h3>নতুন প্রশ্ন যোগ করুন</h3>
      <input type="text" id="questionText" placeholder="প্রশ্ন লিখুন">
      <input type="text" id="option1" placeholder="অপশন ১">
      <input type="text" id="option2" placeholder="অপশন ২">
      <input type="text" id="option3" placeholder="অপশন ৩">
      <input type="text" id="option4" placeholder="অপশন ৪">

      <select id="correctAnswer">
        <option value="" disabled selected>সঠিক উত্তর নির্বাচন করুন</option>
        <option value="1">অপশন ১</option>
        <option value="2">অপশন ২</option>
        <option value="3">অপশন ৩</option>
        <option value="4">অপশন ৪</option>
      </select>

      <button onclick="addQuestion()">✅ সংরক্ষণ</button>
      <button onclick="closeModal()">❌ বাতিল</button>
    </div>
  </div>

  <script>
    const questions = [];

    function openModal() {
      document.getElementById("modal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("modal").style.display = "none";
      clearForm();
    }

    function addQuestion() {
      const question = document.getElementById("questionText").value;
      const options = [
        document.getElementById("option1").value,
        document.getElementById("option2").value,
        document.getElementById("option3").value,
        document.getElementById("option4").value
      ];
      const correct = parseInt(document.getElementById("correctAnswer").value);

      if (!question || options.includes("") || isNaN(correct)) {
        alert("সব তথ্য পূরণ করুন");
        return;
      }

      const q = {
        question: question,
        options: options,
        correctAnswerIndex: correct - 1
      };

      questions.push(q);
      displayQuestions();
      closeModal(); // ✅ সংরক্ষণের পর পপআপ বন্ধ হবে
    }

    function displayQuestions() {
      const list = document.getElementById("questionList");
      list.innerHTML = "";
      questions.forEach((q, i) => {
        list.innerHTML += `
          <div class="question">
            <strong>প্রশ্ন ${i + 1}:</strong> ${q.question}<br>
            ${q.options.map((opt, j) => `${j + 1}. ${opt}${j === q.correctAnswerIndex ? " ✅" : ""}`).join("<br>")}
          </div>
        `;
      });
    }

    function clearForm() {
      document.getElementById("questionText").value = "";
      document.getElementById("option1").value = "";
      document.getElementById("option2").value = "";
      document.getElementById("option3").value = "";
      document.getElementById("option4").value = "";
      document.getElementById("correctAnswer").value = "";
    }

    function downloadJSON() {
      const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(questions, null, 2));
      const a = document.createElement('a');
      a.setAttribute("href", dataStr);
      a.setAttribute("download", "questions.json");
      document.body.appendChild(a);
      a.click();
      a.remove();
    }
  </script>

</body>
</html>
