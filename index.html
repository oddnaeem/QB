<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡¶¨‡¶æ‡¶ó‡¶ß‡¶æ‡¶∞‡¶æ MCQ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: "Noto Sans Bengali", sans-serif;
      background: #e6ecf0;
      margin: 0;
      padding: 0;
    }
    header {
      background: #2c3e50;
      padding: 20px;
      color: white;
      text-align: center;
      font-size: 1.8em;
    }
    .container {
      max-width: 900px;
      margin: 30px auto;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      padding: 20px 30px;
    }
    .start-section, .quiz-section {
      display: none;
    }
    .start-section.active, .quiz-section.active {
      display: block;
    }
    .form-group {
      margin-bottom: 20px;
      text-align: center;
    }
    label {
      font-size: 1.1em;
    }
    input[type=number] {
      padding: 10px;
      width: 80px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1em;
    }
    button {
      background-color: #3498db;
      color: white;
      padding: 12px 24px;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #2980b9;
    }
    .question {
      margin-bottom: 20px;
    }
    .question-title {
      font-weight: bold;
      margin-bottom: 10px;
    }
    .options label {
      display: block;
      background: #f2f2f2;
      padding: 10px;
      margin-bottom: 8px;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s ease;
      border: 1px solid #ccc;
    }
    .options label:hover {
      background: #e0e0e0;
    }
    .feedback {
      font-weight: bold;
      margin-top: 8px;
    }
    .correct { color: green; }
    .incorrect { color: red; }
    #timer {
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      color: #e67e22;
      margin-bottom: 20px;
    }
    #result {
      text-align: center;
      font-size: 1.3em;
      margin-top: 30px;
      background: #ecf9ec;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #2ecc71;
    }
  </style>
</head>
<body>
  <header>
    üìù ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶¨‡¶æ‡¶ó‡¶ß‡¶æ‡¶∞‡¶æ MCQ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ
  </header>
  <div class="container">
    <section id="startSection" class="start-section active">
      <div class="form-group">
        <label>‚è±Ô∏è ‡¶∏‡¶Æ‡ßü ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßã (‡¶ò‡¶£‡ßç‡¶ü‡¶æ : ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü : ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°):</label><br>
        <input type="number" id="hours" value="0" min="0" max="5"> :
        <input type="number" id="minutes" value="3" min="0" max="59"> :
        <input type="number" id="seconds" value="0" min="0" max="59">
      </div>
      <div class="form-group">
        <label>üìå ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ:</label><br>
        <input type="number" id="questionCount" value="30" min="1" max="100">
      </div>
      <div class="form-group">
        <button onclick="startExam()">‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßã</button>
      </div>
    </section>

    <section id="quizSection" class="quiz-section">
      <div id="timer"></div>
      <form id="quizForm"></form>
      <div id="result"></div>
    </section>
  </div>

  <script>
    let allQuestions = [];
    let selectedQuestions = [];
    let timeLeft = 60;
    let timerInterval;
    let score = 0;
    let attempted = 0;
    let totalQuestions = 30;

    async function loadQuestions() {
      try {
        const response = await fetch('Data.json');
        if (!response.ok) throw new Error('JSON ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
        allQuestions = await response.json();
      } catch (err) {
        alert('‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: ' + err.message);
        allQuestions = [];
      }
    }

    function shuffleArray(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    async function startExam() {
      await loadQuestions();
      if (allQuestions.length === 0) {
        alert('‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§');
        return;
      }

      const h = parseInt(document.getElementById("hours").value) || 0;
      const m = parseInt(document.getElementById("minutes").value) || 0;
      const s = parseInt(document.getElementById("seconds").value) || 0;
      timeLeft = h * 3600 + m * 60 + s;
      if (timeLeft < 10) timeLeft = 60;

      totalQuestions = parseInt(document.getElementById("questionCount").value) || 30;
      selectedQuestions = shuffleArray([...allQuestions]).slice(0, totalQuestions);

      score = 0;
      attempted = 0;

      document.getElementById("startSection").classList.remove("active");
      document.getElementById("quizSection").classList.add("active");

      renderQuestions();
      startTimer();
    }

    function renderQuestions() {
      const form = document.getElementById("quizForm");
      form.innerHTML = "";
      selectedQuestions.forEach((q, index) => {
        const div = document.createElement("div");
        div.className = "question";
        div.innerHTML = `<div class='question-title'>${index + 1}. ${q.question}</div>`;

        const optionsDiv = document.createElement("div");
        optionsDiv.className = "options";

        shuffleArray(q.options).forEach(opt => {
          const label = document.createElement("label");
          label.innerHTML = `<input type="radio" name="q${index}" value="${opt}"> ${opt}`;
          const input = label.querySelector("input");

          input.addEventListener("change", function () {
            if (input.disabled) return;
            document.querySelectorAll(`input[name='q${index}']`).forEach(el => el.disabled = true);
            attempted++;

            const isCorrect = input.value === q.answer;
            if (isCorrect) score++;

            const feedback = document.createElement("div");
            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.textContent = isCorrect ? '‚úÖ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞!' : `‚ùå ‡¶≠‡ßÅ‡¶≤ ‡¶â‡¶§‡ßç‡¶§‡¶∞! ‡¶∏‡¶†‡¶ø‡¶ï: ${q.answer}`;
            div.appendChild(feedback);

            if (attempted === selectedQuestions.length) endExam();
          });
          optionsDiv.appendChild(label);
        });
        div.appendChild(optionsDiv);
        form.appendChild(div);
      });
    }

    function formatTime(seconds) {
      const hrs = Math.floor(seconds / 3600);
      const mins = Math.floor((seconds % 3600) / 60);
      const secs = seconds % 60;
      return `${hrs.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    function startTimer() {
      const timerDisplay = document.getElementById("timer");
      timerDisplay.textContent = `‚è≥ ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞: ${formatTime(timeLeft)}`;
      timerInterval = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = `‚è≥ ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞: ${formatTime(timeLeft)}`;
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          lockRemaining();
          endExam();
        }
      }, 1000);
    }

    function lockRemaining() {
      selectedQuestions.forEach((q, index) => {
        const inputs = document.querySelectorAll(`input[name='q${index}']`);
        inputs.forEach(el => el.disabled = true);
        const checked = document.querySelector(`input[name='q${index}']:checked`);
        if (!checked) {
          const feedback = document.createElement("div");
          feedback.className = "feedback incorrect";
          feedback.textContent = `‚ùå ‡¶Ü‡¶™‡¶®‡¶ø ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶®‡¶®‡¶ø‡•§ ‡¶∏‡¶†‡¶ø‡¶ï: ${q.answer}`;
          document.querySelectorAll(".question")[index].appendChild(feedback);
        }
      });
    }

    function endExam() {
      clearInterval(timerInterval);
      document.getElementById("result").textContent = `üéØ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞: ${score} / ${selectedQuestions.length}`;
    }
  </script>
</body>
</html>
